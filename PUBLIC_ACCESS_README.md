# Инструкция по настройке публичного доступа к системе

Эта инструкция поможет вам настроить публичный доступ к системе учета посещаемости, чтобы эксперты могли получить доступ через QR-код.

# Публичный доступ к системе учета посещаемости

## Локальный доступ в одной сети

Для предоставления доступа к системе в рамках одной локальной сети (например, когда все подключены к одному WiFi):

1. Запустите `start_public_server.bat`
2. Система автоматически:
   - Определит ваш локальный IP-адрес
   - Запустит сервер на этом IP
   - Создаст QR-коды для доступа к API и фронтенду
   - Откроет веб-интерфейс в браузере

3. Пользователи в той же сети могут отсканировать QR-код и получить доступ к системе

## Глобальный доступ из любой точки мира

Для предоставления доступа к системе из любой точки интернета:

1. Запустите `deploy_all.bat`
2. Выберите один из вариантов:
   - Полная версия на PythonAnywhere (с бэкендом)
   - Статическая версия на GitHub Pages
   - Статическая версия на Netlify (самый простой вариант)

3. Следуйте инструкциям выбранного варианта
4. После публикации, вы получите URL для доступа к системе
5. Создайте QR-код для этого URL, чтобы пользователи могли легко получить доступ

## Ограничения публикации в интернете

Обратите внимание, что при публикации в интернете:
- Полная версия на PythonAnywhere имеет ограничения на бесплатном тарифе
- Статические версии на GitHub Pages и Netlify не имеют бэкенда и поддерживают только демо-интерфейс
- Функции работы с камерой не доступны через веб-интерфейс
- Для полноценной работы с распознаванием нужен локальный запуск

## Рекомендации для презентации

Для наилучшего опыта презентации системы:

1. **Для демонстрации локально в аудитории:**
   - Используйте `start_local_server.bat` для запуска системы на localhost
   - Демонстрируйте работу через свой компьютер

2. **Для доступа экспертов к интерфейсу в одной сети:**
   - Используйте `start_public_server.bat` для создания QR-кодов
   - Эксперты смогут подключиться через смартфоны при подключении к той же WiFi сети

3. **Для удаленной демонстрации:**
   - Опубликуйте статическую версию на Netlify (самый быстрый способ)
   - Поделитесь ссылкой или QR-кодом с экспертами
   - Объясните, что это демо-версия интерфейса без функций распознавания

4. **Для полноценного доступа удаленно:**
   - Опубликуйте полную версию на PythonAnywhere
   - Учтите ограничения бесплатного плана
   - Создайте QR-код для доступа

## Создание QR-кодов для любого URL

Если вам нужно создать QR-код для любого URL (например, после публикации на GitHub Pages или Netlify):

1. Воспользуйтесь онлайн-сервисами:
   - [QR Code Generator](https://www.qr-code-generator.com/)
   - [QRCode Monkey](https://www.qrcode-monkey.com/)
   - [QR Tiger](https://www.qrcode-tiger.com/)

2. Или используйте Python-скрипт:
   ```
   python -c "import qrcode; img = qrcode.make('https://ваш-сайт.com'); img.save('qrcode.png')"
   ```

## Техническая поддержка

Если у вас возникли вопросы или проблемы при настройке публичного доступа, обратитесь к разработчикам системы.

Вы можете выбрать один из двух способов организации доступа к системе:

1. **Доступ через Интернет с помощью ngrok** - позволяет получить доступ к системе из любой точки мира через Интернет (требуется регистрация в ngrok)
2. **Доступ через локальную сеть** - более простой способ, но все устройства должны быть подключены к одной Wi-Fi сети

## Способ 1: Доступ через Интернет с помощью ngrok

### Подготовка к первому запуску (обязательно!)

Перед первым использованием публичного доступа необходимо настроить ngrok:

1. **Зарегистрируйтесь на сайте ngrok**:
   - Перейдите по ссылке: https://dashboard.ngrok.com/signup
   - Создайте бесплатную учетную запись

2. **Получите ваш токен аутентификации**:
   - После регистрации перейдите на: https://dashboard.ngrok.com/get-started/your-authtoken
   - Скопируйте ваш authtoken

3. **Настройте ngrok с вашим токеном**:
   - Запустите файл `setup_ngrok.bat` двойным щелчком мыши
   - Вставьте скопированный токен и нажмите Enter

### Быстрый запуск (рекомендуется)

1. После настройки токена запустите файл `start_public_server.bat` двойным щелчком мыши
2. Следуйте инструкциям на экране
3. Используйте сгенерированные QR-коды в вашей презентации

### Запуск вручную

Если вы предпочитаете запускать шаги по отдельности или у вас возникли проблемы с автоматическим запуском, выполните следующие шаги:

1. **Запуск API с туннелем ngrok**
   ```
   python run_with_ngrok.py
   ```

2. **Обновление URL в React-приложении**
   ```
   python update_frontend_url.py https://ваш-ngrok-url-здесь
   ```

3. **Запуск фронтенда**
   ```
   cd frontend
   npm start
   ```

## Способ 2: Доступ через локальную сеть (Wi-Fi)

Этот способ намного проще и не требует регистрации, но все устройства (ваш компьютер и устройства экспертов) должны быть подключены к одной Wi-Fi сети.

### Быстрый запуск

1. Убедитесь, что ваш компьютер и устройства экспертов подключены к одной Wi-Fi сети
2. Запустите файл `start_local_server.bat` двойным щелчком мыши
3. Система автоматически определит ваш IP-адрес в локальной сети и сгенерирует QR-коды
4. Изображение с QR-кодами откроется автоматически, вы можете показать его экспертам или добавить в презентацию

### Запуск вручную

1. Запустите `python alternative_server.py`
2. Система выполнит все необходимые шаги автоматически

## Проверка доступа

1. После запуска всех компонентов вы увидите QR-коды для доступа
2. Отсканируйте QR-код для фронтенда с любого мобильного устройства или компьютера с камерой
3. Убедитесь, что сайт открывается и работает корректно

## Важные замечания

### Для доступа через Интернет (ngrok)
- Туннели ngrok действуют временно (максимум 2 часа для бесплатного аккаунта)
- После перезапуска сервера URL изменится, и вам потребуется обновить QR-коды
- Для презентации рекомендуется заранее создать QR-коды и проверить их работу

### Для доступа через локальную сеть
- Все устройства должны быть подключены к одной Wi-Fi сети
- IP-адрес вашего компьютера может измениться при переподключении к сети
- Если IP-адрес изменился, необходимо перезапустить сервер

## Решение проблем

- **Ошибка "Authentication failed"**: Выполните настройку токена аутентификации с помощью `setup_ngrok.bat`
- **Ошибка "Could not connect to ngrok"**: Убедитесь, что у вас установлен ngrok и у вас есть доступ к интернету
- **Фронтенд не может соединиться с API**: Проверьте, что URL API правильно обновлен в файле `frontend/src/App.js`
- **Камера не работает в браузере**: Убедитесь, что вы используете HTTPS URL для доступа (ngrok по умолчанию предоставляет HTTPS)
- **Устройства не могут подключиться в локальной сети**: Проверьте, что все устройства подключены к одной Wi-Fi сети и брандмауэр не блокирует порты 8000 и 3000 