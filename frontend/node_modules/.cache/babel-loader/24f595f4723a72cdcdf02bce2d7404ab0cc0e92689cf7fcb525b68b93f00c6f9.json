{"ast":null,"code":"var _jsxFileName = \"/Users/denisanufriev/PycharmProjects/PythonProject5/yolo_camera_project/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [count, setCount] = useState(null);\n  const [boxes, setBoxes] = useState([]);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // üé• –ó–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n  useEffect(() => {\n    const startCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (err) {\n        console.error(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:\", err);\n      }\n    };\n    startCamera();\n  }, []);\n\n  // üì¶ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤\n  useEffect(() => {\n    const drawBoxes = () => {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      const video = videoRef.current;\n      if (!canvas || !ctx || !video) return;\n\n      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–Ω–≤–∞—Å–∞ = —Ä–∞–∑–º–µ—Ä—É –≤–∏–¥–µ–æ\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n\n      // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö box'–æ–≤\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ input YOLO (–æ–±—ã—á–Ω–æ 640x640)\n      const scaleX = canvas.width / 640;\n      const scaleY = canvas.height / 640;\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = \"lime\";\n      ctx.font = \"16px Arial\";\n      ctx.fillStyle = \"lime\";\n      boxes.forEach((box, i) => {\n        const x = box.xmin * scaleX;\n        const y = box.ymin * scaleY;\n        const width = (box.xmax - box.xmin) * scaleX;\n        const height = (box.ymax - box.ymin) * scaleY;\n        ctx.strokeRect(x, y, width, height);\n        ctx.fillText(`ID ${i + 1}`, x + 4, y + 16);\n      });\n    };\n    drawBoxes();\n  }, [boxes]);\n\n  // üîÅ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤\n  useEffect(() => {\n    const interval = setInterval(handleDetect, 3000); // –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫\n    return () => clearInterval(interval); // –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n  }, []);\n\n  // üß† –ó–∞–ø—Ä–æ—Å –∫ FastAPI\n  const handleDetect = async () => {\n    try {\n      const res = await fetch(\"http://localhost:8000/api/v1/detect-live\");\n      const data = await res.json();\n      setCount(data.count);\n      setBoxes(data.boxes || []);\n    } catch (err) {\n      console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"1rem\",\n      fontFamily: \"Arial, sans-serif\",\n      textAlign: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83C\\uDF93 YOLO Student Counter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"relative\",\n        display: \"inline-block\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        muted: true,\n        playsInline: true,\n        style: {\n          width: \"640px\",\n          height: \"auto\",\n          borderRadius: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          position: \"absolute\",\n          top: 0,\n          left: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"1rem\",\n        fontSize: \"18px\"\n      },\n      children: [\"\\uD83E\\uDDCD \\u041D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E \\u0441\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u043E\\u0432: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: count !== null ? count : \"‚Äî\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"2h1r6k1TjbdofmIb3+wJlRYWsb8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","App","_s","count","setCount","boxes","setBoxes","videoRef","canvasRef","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","err","console","error","drawBoxes","canvas","ctx","getContext","width","videoWidth","height","videoHeight","clearRect","scaleX","scaleY","lineWidth","strokeStyle","font","fillStyle","forEach","box","i","x","xmin","y","ymin","xmax","ymax","strokeRect","fillText","interval","setInterval","handleDetect","clearInterval","res","fetch","data","json","style","padding","fontFamily","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","position","display","ref","autoPlay","muted","playsInline","borderRadius","top","left","marginTop","fontSize","_c","$RefreshReg$"],"sources":["/Users/denisanufriev/PycharmProjects/PythonProject5/yolo_camera_project/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nfunction App() {\n  const [count, setCount] = useState(null);\n  const [boxes, setBoxes] = useState([]);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // üé• –ó–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n  useEffect(() => {\n    const startCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (err) {\n        console.error(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:\", err);\n      }\n    };\n\n    startCamera();\n  }, []);\n\n  // üì¶ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤\n  useEffect(() => {\n    const drawBoxes = () => {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      const video = videoRef.current;\n\n      if (!canvas || !ctx || !video) return;\n\n      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–Ω–≤–∞—Å–∞ = —Ä–∞–∑–º–µ—Ä—É –≤–∏–¥–µ–æ\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n\n      // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö box'–æ–≤\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ input YOLO (–æ–±—ã—á–Ω–æ 640x640)\n      const scaleX = canvas.width / 640;\n      const scaleY = canvas.height / 640;\n\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = \"lime\";\n      ctx.font = \"16px Arial\";\n      ctx.fillStyle = \"lime\";\n\n      boxes.forEach((box, i) => {\n        const x = box.xmin * scaleX;\n        const y = box.ymin * scaleY;\n        const width = (box.xmax - box.xmin) * scaleX;\n        const height = (box.ymax - box.ymin) * scaleY;\n\n        ctx.strokeRect(x, y, width, height);\n        ctx.fillText(`ID ${i + 1}`, x + 4, y + 16);\n      });\n    };\n\n    drawBoxes();\n  }, [boxes]);\n\n  // üîÅ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤\n  useEffect(() => {\n    const interval = setInterval(handleDetect, 3000); // –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫\n    return () => clearInterval(interval); // –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n  }, []);\n\n  // üß† –ó–∞–ø—Ä–æ—Å –∫ FastAPI\n  const handleDetect = async () => {\n    try {\n      const res = await fetch(\"http://localhost:8000/api/v1/detect-live\");\n      const data = await res.json();\n      setCount(data.count);\n      setBoxes(data.boxes || []);\n    } catch (err) {\n      console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:\", err);\n    }\n  };\n\n  return (\n    <div style={{ padding: \"1rem\", fontFamily: \"Arial, sans-serif\", textAlign: \"center\" }}>\n      <h1>üéì YOLO Student Counter</h1>\n\n      <div style={{ position: \"relative\", display: \"inline-block\" }}>\n        <video\n          ref={videoRef}\n          autoPlay\n          muted\n          playsInline\n          style={{ width: \"640px\", height: \"auto\", borderRadius: \"10px\" }}\n        />\n        <canvas\n          ref={canvasRef}\n          style={{ position: \"absolute\", top: 0, left: 0 }}\n        />\n      </div>\n\n      <div style={{ marginTop: \"1rem\", fontSize: \"18px\" }}>\n        üßç –ù–∞–π–¥–µ–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: <b>{count !== null ? count : \"‚Äî\"}</b>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}