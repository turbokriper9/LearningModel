{"ast":null,"code":"var _jsxFileName = \"/Users/denisanufriev/PycharmProjects/PythonProject5/yolo_camera_project/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [count, setCount] = useState(null);\n  const [boxes, setBoxes] = useState([]);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    const startCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (error) {\n        console.error(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:\", error);\n      }\n    };\n    startCamera();\n  }, []);\n  useEffect(() => {\n    const interval = setInterval(handleDetect, 2000); // –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã\n    return () => clearInterval(interval);\n  }, []);\n  const handleDetect = async () => {\n    try {\n      const response = await fetch(\"http://localhost:8000/api/v1/detect-live\");\n      const data = await response.json();\n      setCount(data.count);\n      setBoxes(data.boxes || []);\n      drawBoxes(data.boxes || []);\n    } catch (error) {\n      console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:\", error);\n    }\n  };\n  const drawBoxes = boxes => {\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    if (!canvas || !video) return;\n    const ctx = canvas.getContext(\"2d\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.strokeStyle = \"#00FF00\";\n    ctx.lineWidth = 2;\n    boxes.forEach(box => {\n      const {\n        xmin,\n        ymin,\n        xmax,\n        ymax\n      } = box;\n      const width = xmax - xmin;\n      const height = ymax - ymin;\n      ctx.strokeRect(xmin, ymin, width, height);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\",\n      fontFamily: \"Arial, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83C\\uDF93 YOLO Student Counter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"relative\",\n        display: \"inline-block\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        muted: true,\n        style: {\n          width: \"100%\",\n          maxWidth: \"720px\",\n          borderRadius: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          pointerEvents: \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"1rem\"\n      },\n      children: [\"\\uD83E\\uDDCD \\u041E\\u0431\\u043D\\u0430\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \\u0441\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u043E\\u0432: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 34\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"51KLX6VyvHYcAczZl8atOn/Ag4Y=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","App","_s","count","setCount","boxes","setBoxes","videoRef","canvasRef","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","error","console","interval","setInterval","handleDetect","clearInterval","response","fetch","data","json","drawBoxes","canvas","ctx","getContext","width","videoWidth","height","videoHeight","clearRect","strokeStyle","lineWidth","forEach","box","xmin","ymin","xmax","ymax","strokeRect","style","textAlign","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","position","display","ref","autoPlay","playsInline","muted","maxWidth","borderRadius","top","left","pointerEvents","marginTop","_c","$RefreshReg$"],"sources":["/Users/denisanufriev/PycharmProjects/PythonProject5/yolo_camera_project/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nfunction App() {\n  const [count, setCount] = useState(null);\n  const [boxes, setBoxes] = useState([]);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const startCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (error) {\n        console.error(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:\", error);\n      }\n    };\n    startCamera();\n  }, []);\n\n  useEffect(() => {\n    const interval = setInterval(handleDetect, 2000); // –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleDetect = async () => {\n    try {\n      const response = await fetch(\"http://localhost:8000/api/v1/detect-live\");\n      const data = await response.json();\n      setCount(data.count);\n      setBoxes(data.boxes || []);\n      drawBoxes(data.boxes || []);\n    } catch (error) {\n      console.error(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:\", error);\n    }\n  };\n\n  const drawBoxes = (boxes) => {\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    if (!canvas || !video) return;\n\n    const ctx = canvas.getContext(\"2d\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    ctx.strokeStyle = \"#00FF00\";\n    ctx.lineWidth = 2;\n\n    boxes.forEach((box) => {\n      const { xmin, ymin, xmax, ymax } = box;\n      const width = xmax - xmin;\n      const height = ymax - ymin;\n      ctx.strokeRect(xmin, ymin, width, height);\n    });\n  };\n\n  return (\n    <div style={{ textAlign: \"center\", fontFamily: \"Arial, sans-serif\" }}>\n      <h1>üéì YOLO Student Counter</h1>\n\n      <div style={{ position: \"relative\", display: \"inline-block\" }}>\n        <video\n          ref={videoRef}\n          autoPlay\n          playsInline\n          muted\n          style={{ width: \"100%\", maxWidth: \"720px\", borderRadius: \"10px\" }}\n        />\n        <canvas\n          ref={canvasRef}\n          style={{\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            pointerEvents: \"none\",\n          }}\n        />\n      </div>\n\n      <div style={{ marginTop: \"1rem\" }}>\n        üßç –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: <b>{count}</b>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMS,QAAQ,GAAGV,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMW,SAAS,GAAGX,MAAM,CAAC,IAAI,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMa,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;UAAEC,KAAK,EAAE;QAAK,CAAC,CAAC;QACzE,IAAIP,QAAQ,CAACQ,OAAO,EAAE;UACpBR,QAAQ,CAACQ,OAAO,CAACC,SAAS,GAAGN,MAAM;QACrC;MACF,CAAC,CAAC,OAAOO,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD;IACF,CAAC;IACDR,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAENb,SAAS,CAAC,MAAM;IACd,MAAMuB,QAAQ,GAAGC,WAAW,CAACC,YAAY,EAAE,IAAI,CAAC,CAAC,CAAC;IAClD,OAAO,MAAMC,aAAa,CAACH,QAAQ,CAAC;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,0CAA0C,CAAC;MACxE,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAClCtB,QAAQ,CAACqB,IAAI,CAACtB,KAAK,CAAC;MACpBG,QAAQ,CAACmB,IAAI,CAACpB,KAAK,IAAI,EAAE,CAAC;MAC1BsB,SAAS,CAACF,IAAI,CAACpB,KAAK,IAAI,EAAE,CAAC;IAC7B,CAAC,CAAC,OAAOY,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACtD;EACF,CAAC;EAED,MAAMU,SAAS,GAAItB,KAAK,IAAK;IAC3B,MAAMuB,MAAM,GAAGpB,SAAS,CAACO,OAAO;IAChC,MAAMD,KAAK,GAAGP,QAAQ,CAACQ,OAAO;IAC9B,IAAI,CAACa,MAAM,IAAI,CAACd,KAAK,EAAE;IAEvB,MAAMe,GAAG,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;IACnCF,MAAM,CAACG,KAAK,GAAGjB,KAAK,CAACkB,UAAU;IAC/BJ,MAAM,CAACK,MAAM,GAAGnB,KAAK,CAACoB,WAAW;IACjCL,GAAG,CAACM,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEP,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACK,MAAM,CAAC;IAEhDJ,GAAG,CAACO,WAAW,GAAG,SAAS;IAC3BP,GAAG,CAACQ,SAAS,GAAG,CAAC;IAEjBhC,KAAK,CAACiC,OAAO,CAAEC,GAAG,IAAK;MACrB,MAAM;QAAEC,IAAI;QAAEC,IAAI;QAAEC,IAAI;QAAEC;MAAK,CAAC,GAAGJ,GAAG;MACtC,MAAMR,KAAK,GAAGW,IAAI,GAAGF,IAAI;MACzB,MAAMP,MAAM,GAAGU,IAAI,GAAGF,IAAI;MAC1BZ,GAAG,CAACe,UAAU,CAACJ,IAAI,EAAEC,IAAI,EAAEV,KAAK,EAAEE,MAAM,CAAC;IAC3C,CAAC,CAAC;EACJ,CAAC;EAED,oBACEjC,OAAA;IAAK6C,KAAK,EAAE;MAAEC,SAAS,EAAE,QAAQ;MAAEC,UAAU,EAAE;IAAoB,CAAE;IAAAC,QAAA,gBACnEhD,OAAA;MAAAgD,QAAA,EAAI;IAAuB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEhCpD,OAAA;MAAK6C,KAAK,EAAE;QAAEQ,QAAQ,EAAE,UAAU;QAAEC,OAAO,EAAE;MAAe,CAAE;MAAAN,QAAA,gBAC5DhD,OAAA;QACEuD,GAAG,EAAEhD,QAAS;QACdiD,QAAQ;QACRC,WAAW;QACXC,KAAK;QACLb,KAAK,EAAE;UAAEd,KAAK,EAAE,MAAM;UAAE4B,QAAQ,EAAE,OAAO;UAAEC,YAAY,EAAE;QAAO;MAAE;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnE,CAAC,eACFpD,OAAA;QACEuD,GAAG,EAAE/C,SAAU;QACfqC,KAAK,EAAE;UACLQ,QAAQ,EAAE,UAAU;UACpBQ,GAAG,EAAE,CAAC;UACNC,IAAI,EAAE,CAAC;UACPC,aAAa,EAAE;QACjB;MAAE;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAENpD,OAAA;MAAK6C,KAAK,EAAE;QAAEmB,SAAS,EAAE;MAAO,CAAE;MAAAhB,QAAA,GAAC,oIACR,eAAAhD,OAAA;QAAAgD,QAAA,EAAI7C;MAAK;QAAA8C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAClD,EAAA,CAtFQD,GAAG;AAAAgE,EAAA,GAAHhE,GAAG;AAwFZ,eAAeA,GAAG;AAAC,IAAAgE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}